(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{28:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r,c=n(1),o=n(17),a=(n(26),n(27),n(28),n(6)),s=n(14),u=n(2),i=n.n(u),l=n(4),d=n(3),p=n(5),f=n.n(p),b=n(0),j=function(e){var t=e.todos,n=e.onError,r=e.onTodoAdd,o=e.isActive,a=e.onTodoToggle,s=Object(c.useState)(""),u=Object(d.a)(s,2),p=u[0],j=u[1],m=Object(c.useState)(!1),h=Object(d.a)(m,2),O=h[0],v=h[1],x=Object(c.useRef)(null);Object(c.useEffect)((function(){x.current&&x.current.focus()}),[O,t.length]);var y=p.trim(),T=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),t.preventDefault(),y){e.next=7;break}return j(""),n("Title should not be empty"),v(!1),e.abrupt("return");case 7:return e.prev=7,e.next=10,r(y);case 10:j(""),v(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),v(!1);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("header",{className:"todoapp__header",children:[t.length>0&&Object(b.jsx)("button",{"aria-label":"toggle button",type:"button",className:f()("todoapp__toggle-all",{active:o}),"data-cy":"ToggleAllButton",onClick:a}),Object(b.jsx)("form",{onSubmit:T,children:Object(b.jsx)("input",{"data-cy":"NewTodoField",type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",ref:x,disabled:O,value:p,onChange:function(e){j(e.target.value)}})})]})},m=n(36),h=n(35),O=function(e){var t=e.todo,n=e.isLoading,r=e.onTodoDelete,o=e.onTodoUpdate,s=Object(c.useState)(!1),u=Object(d.a)(s,2),p=u[0],j=u[1],m=Object(c.useState)(t.title),h=Object(d.a)(m,2),O=h[0],v=h[1],x=Object(c.useRef)(null);Object(c.useEffect)((function(){p&&x.current&&x.current.focus()}),[p]);var y=function(){var e=Object(l.a)(i.a.mark((function e(n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c=O.trim()){e.next=5;break}return null===r||void 0===r||r(),e.abrupt("return");case 5:if(t.title!==c){e.next=8;break}return j(!1),e.abrupt("return");case 8:return e.prev=8,e.next=11,null===o||void 0===o?void 0:o(Object(a.a)(Object(a.a)({},t),{},{title:c}));case 11:j(!1),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(8),x.current&&x.current.focus(),new Error("Some error occured");case 18:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{"data-cy":"Todo",className:f()("todo",{completed:t.completed}),onDoubleClick:function(){return j(!0)},children:[Object(b.jsx)("label",{className:"todo__status-label",children:Object(b.jsx)("input",{"data-cy":"TodoStatus",type:"checkbox",className:"todo__status",checked:t.completed,onChange:function(){null===o||void 0===o||o(Object(a.a)(Object(a.a)({},t),{},{completed:!t.completed}))}})}),p?Object(b.jsx)("form",{onSubmit:y,children:Object(b.jsx)("input",{onBlur:y,"data-cy":"TodoTitleField",type:"text",className:"todo__title-field",placeholder:"Empty todo will be deleted",ref:x,value:O,onChange:function(e){v(e.target.value)},onKeyUp:function(e){"Escape"===e.key&&(j(!1),v(t.title))}})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{"data-cy":"TodoTitle",className:"todo__title",children:t.title}),Object(b.jsx)("button",{type:"button",className:"todo__remove","data-cy":"TodoDelete",onClick:r,children:"\xd7"})]}),Object(b.jsxs)("div",{"data-cy":"TodoLoader",className:f()("modal overlay",{"is-active":n}),children:[Object(b.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(b.jsx)("div",{className:"loader"})]})]})},v=function(e){var t=e.todos,n=e.modifyingTodoIds,r=e.deleteTodoHandler,c=e.tempTodo,o=e.onTodoUpdate;return Object(b.jsx)("section",{className:"todoapp__main","data-cy":"TodoList",children:Object(b.jsxs)(m.a,{children:[t.map((function(e){return Object(b.jsx)(h.a,{timeout:300,classNames:"item",children:Object(b.jsx)(O,{todo:e,isLoading:n.includes(e.id),onTodoDelete:function(){return r(e.id)},onTodoUpdate:o},e.id)},e.id)})),c&&Object(b.jsx)(h.a,{timeout:300,classNames:"temp-item",children:Object(b.jsx)(O,{todo:c,isLoading:!0})},0)]})})};!function(e){e.All="All",e.Active="Active",e.Completed="Completed"}(r||(r={}));var x=function(e){var t=e.todos,n=e.onClearButtonDelete,c=e.filterBy,o=e.onFilterClick,a=Object.values(r).map((function(e){return Object(b.jsx)("a",{href:"#/".concat(e.toLowerCase()),className:f()("filter__link",{selected:e===c}),"data-cy":"FilterLink".concat(e),onClick:function(){return o(e)},children:e},e)})),s=t.filter((function(e){return!e.completed})).length,u=t.some((function(e){return e.completed}));return Object(b.jsxs)("footer",{className:"todoapp__footer","data-cy":"Footer",children:[Object(b.jsx)("span",{className:"todo-count","data-cy":"TodosCounter",children:"".concat(s,1===s?" item left":" items left")}),Object(b.jsx)("nav",{className:"filter","data-cy":"Filter",children:a}),Object(b.jsx)("button",{type:"button",className:f()("todoapp__clear-completed",{hidden:!u}),"data-cy":"ClearCompletedButton",onClick:n,disabled:!u,children:"Clear completed"})]})},y=function(e){var t=e.errorMessage,n=e.setErrorMessage,r=Object(c.useRef)(0);return Object(c.useEffect)((function(){r.current&&clearTimeout(r.current),r.current=window.setTimeout((function(){n("")}),3e3)}),[n,t]),Object(b.jsxs)("div",{"data-cy":"ErrorNotification",className:f()("notification","is-danger","is-light","has-text-weight-normal",{hidden:!t}),children:[Object(b.jsx)("button",{"aria-label":"HideErrorButton","data-cy":"HideErrorButton",type:"button",className:"delete",onClick:function(){return n("")}}),t]})},T="https://mate.academy/students-api";function g(e){return new Promise((function(t){setTimeout(t,e)}))}function k(e){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(i.a.mark((function e(t){var n,r,c,o,a,s,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",r=u.length>2&&void 0!==u[2]?u[2]:null,c={method:n},r&&(c.body=JSON.stringify(r),c.headers={"Content-Type":"application/json; charset=UTF-8"}),e.next=6,Promise.all([fetch(T+t,c),g(100)]);case 6:return o=e.sent,a=Object(d.a)(o,1),s=a[0],e.abrupt("return",s.ok?s.json():Promise.reject());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){return k(e)},_=function(e,t){return k(e,"POST",t)},C=function(e,t){return k(e,"PATCH",t)},E=function(e){return k(e,"DELETE")},S=11827,A=function(e){return _("/todos",{userId:S,title:e,completed:!1})},B=function(e){return E("/todos/".concat(e))},F=function(e){return C("/todos/".concat(e.id),{userId:e.userId,title:e.title,completed:e.completed})},U=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],o=t[1],u=Object(c.useState)(""),p=Object(d.a)(u,2),f=p[0],m=p[1],h=Object(c.useState)(null),O=Object(d.a)(h,2),T=O[0],g=O[1],k=Object(c.useState)([]),w=Object(d.a)(k,2),_=w[0],C=w[1],E=Object(c.useState)(r.All),U=Object(d.a)(E,2),D=U[0],I=U[1],L=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/todos?userId=".concat(S));case 3:t=e.sent,o(t),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),m("Unable to load todos"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){L()}),[]);var P=n.filter((function(e){switch(D){case r.Active:return!e.completed;case r.Completed:return e.completed;default:return r.All}})),H=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(""),g({id:0,userId:S,title:t,completed:!1}),e.prev=2,e.next=5,A(t);case 5:n=e.sent,o((function(e){return[].concat(Object(s.a)(e),[n])})),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),m("Unable to add a todo"),e.t0;case 13:return e.prev=13,g(null),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(""),C((function(e){return[].concat(Object(s.a)(e),[t])})),e.prev=2,e.next=5,B(t);case 5:o((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),m("Unable to delete a todo"),e.t0;case 12:return e.prev=12,C((function(e){return e.filter((function(e){return e!==t}))})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.filter((function(e){return e.completed})),e.next=3,Promise.allSettled(t.map((function(e){return M(e.id)})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C((function(e){return[].concat(Object(s.a)(e),[t.id])})),e.prev=1,e.next=4,F(t);case 4:n=e.sent,o((function(e){return e.map((function(e){return e.id===n.id?n:e}))})),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),m("Unable to update todo"),e.t0;case 12:return e.prev=12,C((function(e){return e.filter((function(e){return e!==t.id}))})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.every((function(e){return e.completed})),r=n.filter((function(e){return t?e.completed:!e.completed})),e.next=4,Promise.all(r.map((function(e){return J(Object(a.a)(Object(a.a)({},e),{},{completed:!t}))})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"todoapp",children:[Object(b.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(b.jsxs)("div",{className:"todoapp__content",children:[Object(b.jsx)(j,{todos:n,onError:m,onTodoAdd:H,isActive:n.every((function(e){return e.completed})),onTodoToggle:G}),n.length>0&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{todos:P,deleteTodoHandler:M,tempTodo:T,modifyingTodoIds:_,onTodoUpdate:J}),Object(b.jsx)(x,{todos:n,onClearButtonDelete:R,filterBy:D,onFilterClick:I})]})]}),f&&Object(b.jsx)(y,{errorMessage:f,setErrorMessage:m})]})};Object(o.createRoot)(document.getElementById("root")).render(Object(b.jsx)(U,{}))}},[[33,1,2]]]);
//# sourceMappingURL=main.c5074f19.chunk.js.map